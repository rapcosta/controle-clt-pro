function salvar(){

const s1 = document.getElementById("senha1").value
const s2 = document.getElementById("senha2").value

if(!s1 || !s2){
alert("Preencha as duas senhas")
return
}

if(s1 !== s2){
alert("As senhas não coincidem")
return
}

const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"))
let usuarios = JSON.parse(localStorage.getItem("usuarios")) || []

let index = usuarios.findIndex(u => u.nome === usuarioLogado.nome)

/* ⭐ SE NÃO EXISTIR, CRIA */
if(index === -1){

usuarios.push({
nome: usuarioLogado.nome,
senha: btoa(s1),
unidade: usuarioLogado.unidade || "",
primeiroAcesso:false
})

}else{

usuarios[index].senha = btoa(s1)
usuarios[index].primeiroAcesso = false

}

localStorage.setItem("usuarios", JSON.stringify(usuarios))

usuarioLogado.senha = btoa(s1)
usuarioLogado.primeiroAcesso = false
localStorage.setItem("usuarioLogado", JSON.stringify(usuarioLogado))

alert("Senha alterada com sucesso")

window.location="dashboard.html"
}
