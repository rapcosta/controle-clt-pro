<script>

console.log("üî• HTML CARREGADO")

/* prote√ß√£o login */
if(localStorage.getItem("logado")!=="sim"){
window.location="login.html"
}

/* ========================= */
/* BUSCAR FUNCION√ÅRIOS DO BANCO */
/* ========================= */

async function carregarFuncionarios(){

console.log("üî• BUSCANDO FUNCION√ÅRIOS DO BANCO")

const { data, error } = await supabaseClient
.from("funcionarios")
.select("*")
.order("nome")

if(error){
console.error("‚ùå ERRO AO BUSCAR:", error)
return
}

console.log("üì¶ FUNCION√ÅRIOS:", data)

mostrarTabela(data)

}

/* ========================= */
/* MOSTRAR NA TABELA */
/* ========================= */

function mostrarTabela(lista){

const tabela = document.getElementById("listaFuncionarios")

if(!lista || lista.length===0){
tabela.innerHTML = `
<tr>
<td colspan="5" style="text-align:center;padding:20px">
Nenhum funcion√°rio cadastrado
</td>
</tr>`
return
}

let html=""

lista.forEach(func=>{

html+=`
<tr>
<td>${func.nome || "-"}</td>
<td>${func.cpf || "-"}</td>
<td>${func.cargo || "-"}</td>
<td>${func.setor || "-"}</td>
<td>-</td>
</tr>
`

})

tabela.innerHTML = html

}

/* iniciar */
carregarFuncionarios()

</script>
